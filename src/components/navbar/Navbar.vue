<template>
    <va-navbar class="app-layout-navbar">
        <template #left>
            <div class="left">
                <va-icon-menu-collapsed
                    :class="{ 'x-flip': isSidebarMinimized }"
                    class="va-navbar__item"
                    :color="colors.primary"
                    @click="isSidebarMinimized = !isSidebarMinimized"
                />
                <router-link to="/">
                    <app-logo class="logo" />
                </router-link>
            </div>
        </template>
        <template #right>
            <app-navbar-actions class="app-navbar__actions" :user-name="userName" />
        </template>
    </va-navbar>
</template>

<script setup>
    import { computed } from 'vue'
    import { storeToRefs } from 'pinia'
    import { useGlobalStore } from '../../stores/global-store'
    import { useColors } from 'vuestic-ui'
    import AppLogo from '../AppLogo.vue'
    import VaIconMenuCollapsed from '../icons/VaIconMenuCollapsed.vue'
    import AppNavbarActions from './components/AppNavbarActions.vue'

    const GlobalStore = useGlobalStore()

    const { isSidebarMinimized, userName } = storeToRefs(GlobalStore)

    const { getColors } = useColors()
    const colors = computed(() => getColors())
</script>

<style lang="scss" scoped>
    .va-navbar {
        box-shadow: var(--va-box-shadow);
        z-index: 2;

        @media screen and (max-width: 950px) {
            .left {
                width: 100%;
            }

            .app-navbar__actions {
                width: 100%;
                display: flex;
                justify-content: space-between;
            }
        }
    }

    .left {
        display: flex;
        align-items: center;

        & > * {
            margin-right: 1.5rem;
        }

        & > *:last-child {
            margin-right: 0;
        }
    }

    .x-flip {
        transform: scaleX(-100%);
    }
</style>
